# Feature: Check if there is an active feedback package for this URL

## Overview
This feature determines if there is an active feedback package for the current URL by checking if any existing package's root URL is contained within the current page URL. If a package is found, the system will display comments for that package and allow users to add new comments. If no package is found, the user will need to create one before capturing feedback.

## Technical Requirements

### File Location
- **File Path**: `/Users/ian/git/BackChannel/src/services/packageService.ts`
- **Service Type**: Backend service with no UI responsibilities

### Function Signature
```typescript
function getActiveFeedbackPackage(currentUrl: string): Promise<PackageData | null>
```

### Input/Output
- **Input**: 
  - `currentUrl`: The URL of the current page (string)
- **Output**: 
  - A Promise that resolves to either:
    - The matching package object if found
    - `null` if no matching package is found

### Behavior
1. Take the current page URL
2. Loop through all packages in local database
3. For each package, check if its root URL is contained within the current URL (partial matching)
4. If a match is found, return the first matching package
5. If no match is found, return null
6. If an error occurs accessing the database, handle gracefully and return null

### Edge Cases
- **Multiple Matches**: Return the first matching package
- **No Matches**: Return null
- **Database Error**: Handle gracefully and return null

## Testing Requirements
- Unit tests should be created to verify the function works correctly
- Test cases should include:
  - URL with a matching package
  - URL with no matching package
  - URL with multiple matching packages
  - Error handling when database access fails

## Integration Notes
- This function will be used by other components to determine whether to show comments or prompt for package creation
- The function is purely backend and does not directly manipulate UI
