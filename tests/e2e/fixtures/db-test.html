<!DOCTYPE html>
<html>
<head>
  <title>BackChannel Database Test</title>
  <link rel="stylesheet" href="db-test.css">
</head>
<body>
  <div class="container">
    <h1>BackChannel Database Test</h1>
    
    <!-- Step 1: Browser Support Check -->
    <div class="section">
      <h2>1. IndexedDB Browser Support</h2>
      <p>Check if your browser supports IndexedDB, which is required for BackChannel to function.</p>
      <button id="check-support">Check Browser Support</button>
      <div class="result" id="support-result"></div>
    </div>
  </div>

  <script type="module">
    import { DatabaseService } from '../../../src/services/db.js';
    
    // Step 1: Check browser support for IndexedDB
    document.getElementById('check-support').addEventListener('click', () => {
      try {
        // Create a temporary DatabaseService instance to check support
        const tempDb = new DatabaseService('support-check');
        const isSupported = tempDb.isSupported;
        
        const resultElement = document.getElementById('support-result');
        if (isSupported) {
          resultElement.textContent = 'Your browser supports IndexedDB. BackChannel can function properly.';
          resultElement.className = 'result success';
        } else {
          resultElement.textContent = 'Your browser does not support IndexedDB. BackChannel will not function properly.';
          resultElement.className = 'result error';
        }
      } catch (error) {
        const resultElement = document.getElementById('support-result');
        resultElement.textContent = `Error checking support: ${error.message}`;
        resultElement.className = 'result error';
      }
    });
  </script>
</body>
</html>
